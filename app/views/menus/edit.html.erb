<div class="nav nav-tabs">
  <%= nav_link '1. Choose Recipes', edit_menu_path(@menu) %> 
  <%= nav_link '2. Choose Items', add_others_path(@list) %> 
  <%= nav_link '3. Review Shopping List', edit_list_path(@list) %>
  <%= nav_link 'Your Shopping List', list_path(@list) %>
</div>

<input class="visibility_checkbox" type="checkbox" onclick="toggle_visibility()"> Hide Recipe Descriptions? </input> | 
<%= link_to 'Add a New Recipe', new_recipe_path %>

<div class="form-actions">  
  <%= form_tag edit_menu_path(@menu), :method => 'get' do %>
    <%= text_field_tag :search, params[:search] %>
    <%= submit_tag "Search", :name => nil %>
  <% end %>

  <%= form_for @menu do |menu_form| %>
    <%= menu_form.hidden_field :list_id, value: @list.id %>
    <%= hidden_field_tag "menu[selected_recipes][]" %>
    <%= render 'form', :menu_form => menu_form %> </br>
    <p>Done choosing recipes?</p>
    <%= menu_form.button 'Continue', class: " btn btn-primary" %>
  <% end %>
</div>  

<script>
  var short_view = (localStorage.getItem("short_view")=="true");
  $(".visibility_checkbox").prop('checked', short_view);
  $(".instructions").toggle(!short_view);

  function toggle_visibility() {
    localStorage.setItem("short_view","" + !short_view);
    $(".instructions").toggle(); 
  };
</script> 